<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Technical & Coding Courses</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
  <link rel="stylesheet" href="/RTS/public/css/Deshbord.css">
  <link rel="stylesheet" href="/RTS/public/css/footer.css">
  
  <style>
    /* Visit Count Styling for Technical Courses */
    .visit-count {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.95));
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: 600;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 5px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(4px);
      transition: all 0.3s ease;
    }

    /* Viewers text styling */
    .visit-count .views-text {
      color: #ccc;
      font-weight: 500;
      font-size: 10px;
      letter-spacing: 0.5px;
      white-space: nowrap;
    }

    .visit-count .count {
      font-weight: bold;
      color: #FFD700;
      font-size: 12px;
      transition: all 0.3s ease;
      min-width: 20px;
      text-align: center;
    }

    .visit-count .count.updated {
      animation: pulse 0.8s ease-in-out;
      color: #00FF00;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    .course-card {
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .course-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .course-card:hover .visit-count {
      background: linear-gradient(135deg, rgba(33, 150, 243, 0.9), rgba(0, 0, 0, 0.9));
      transform: scale(1.03);
    }

    .course-card:hover .visit-count .views-text {
      color: #fff;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .visit-count {
        padding: 4px 8px;
        font-size: 10px;
      }
      
      .visit-count .views-text {
        font-size: 9px;
      }
      
      .visit-count .count {
        font-size: 10px;
        min-width: 18px;
      }
    }

    @media (max-width: 480px) {
      .visit-count {
        padding: 3px 6px;
        gap: 3px;
      }
      
      .visit-count .views-text {
        font-size: 8px;
      }
      
      .visit-count .count {
        font-size: 9px;
        min-width: 16px;
      }
    }
  </style>
</head>

<body>
  <header class="main-header">
    <!-- Top Info Bar -->
    <div class="header-info">
      <div class="info-text">
        <p><span>RID (Research Innovation & Discovery) by TWSKAA Welfare Foundation</span></p>
        <p><strong>Helpline:</strong> <span>+91-8307 87323</span></p>
        <p><strong>Email:</strong> <span>supportrid5@gmail.com</span></p>
      </div>
      <div class="header-links">
        <a href="#">Main Content</a>
        <a href="#">+A</a>
        <a href="#">A</a>
        <a href="#">A-</a>
        <a href="#">Feedback</a>
        <a href="#">Support</a>
      </div>
    </div>

    <!-- Main Navigation -->
    <div class="nav-container">
      <div class="logo">
        <img src="/RTS/public/Deshbord/logo.svg" alt="RID Bharat Logo">
      </div>

      <!-- Menu Toggle Button for Mobile -->
      <button class="menu-toggle">
        <i class="fas fa-bars"></i>
      </button>

      <div class="nav-menu" id="navMenu">
        <!-- Search Box -->
        <div class="search-box">
          <input type="text" placeholder="Search test series" id="searchInput">
          <i class="fas fa-search"></i>
        </div>

        <!-- Certificate and Profile Buttons -->
        <div class="nav-buttons">
          <a href="/Certificate-Verification/verify.html" class="btn">
            <i class="fas fa-award"></i> Certificate
          </a>

          <a href="/RTS/public/profile.html" class="btn"><i class="fas fa-user"></i> Profile</a>
        </div>

        <!-- Mobile Navigation -->
        <ul class="mobile-nav" id="mobileNav">
          <!-- Mobile Search Box -->
          <div class="mobile-search-box">
            <input type="text" placeholder="Search test series" id="mobileSearchInput">
            <i class="fas fa-search"></i>
          </div>

          <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="#"><i class="fas fa-file-alt"></i> Research Papers</a></li>
          <li><a href="#" id="about-link"><i class="fas fa-users"></i> About Us</a></li>
          <li class="has-dropdown">
            <a href="#"><i class="fas fa-building"></i> Center</a>
            <ul class="mobile-dropdown">
              <li><a href="#"><i class="fas fa-rocket"></i> Skill Center</a></li>
              <li><a href="#"><i class="fas fa-flask"></i> WIT Center</a></li>
              <li><a href="#"><i class="fas fa-microscope"></i> RID Center</a></li>
            </ul>
          </li>
          <li><a href="/project_rid/public/contact/contact.html"><i class="fas fa-phone-alt"></i> Contact Us</a></li>
        </ul>
      </div>
    </div>

    <!-- Desktop Navigation -->
    <ul class="main-nav">
      <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="#"><i class="fas fa-file-alt"></i> Research Papers</a></li>
      <li><a href="#" id="about-link"><i class="fas fa-users"></i> About Us</a></li>

      <li>
        <a href="#"><i class="fas fa-building"></i> Center <i class="fas fa-chevron-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="#"><i class="fas fa-rocket"></i> Skill Center</a></li>
          <li><a href="#"><i class="fas fa-flask"></i> WIT Center</a></li>
          <li><a href="#"><i class="fas fa-microscope"></i> RID Center</a></li>
        </ul>
      </li>
      <li><a href="/project_rid/public/contact/contact.html"><i class="fas fa-phone-alt"></i> Contact Us</a></li>
    </ul>
  </header>

  <!----side bar wala contain suru -->
  <button class="sidebar-toggle">☰</button>
  <aside class="sidebar">
    <h2 class="mainu">Main Menu</h2>
    <ul class="menu">
      <li><i class="fas fa-home home-icon"></i><a href="/RTS/public/Deshbord.html">Home</a></li>
      <li><i class="fas fa-user profile-icon"></i><a href="">My Profile</a></li>
      <li><i class="fas fa-star category-icon"></i><a href="/RTS/public/Deshbord/category/category.html">Category</a>
      </li>
      <li><i class="fas fa-shopping-cart purchase-icon"></i><a href="/dasborde_main/my purchase/my_purchase.html">My
          Purchase</a></li>
      <li><i class="fas fa-comment-dots feedback-icon"></i><a
          href="/RTS/public/Deshbord/category/test/feedback/feedback.html">Feedback</a></li>
      <li><i class="fas fa-dollar-sign refund-icon"></i><a
          href="/RTS/public/Deshbord/Refund_A_Can_P/refund.html">Refund/Cancellation Policy</a></li>
      <li><i class="fas fa-shield-alt privacy-icon"></i><a
          href="/RTS/public/Deshbord/category/test/Privacy Policy/PrivacyPolicy.html">Privacy Policy</a></li>
      <li><i class="fas fa-file-contract terms-icon"></i><a
          href="/RTS/public/Deshbord/category/test/teamCon/tc.html">Terms and Conditions</a></li>
      <li><i class="fas fa-star-half-alt rate-icon"></i><a href="/RTS/public/Deshbord/reating/reating.html">Rate Us</a>
      </li>
      <li><i class="fas fa-sign-out-alt logout-icon"></i><a href="#">Logout</a></li>
    </ul>
  </aside><br>

  <main>
    <!-- Mobile Search Container - NEW -->
    <div class="mobile-search-container">
      <div class="search-box">
        <input type="text" placeholder="Search test series" id="mainMobileSearchInput">
        <i class="fas fa-search"></i>
      </div>
    </div>

    <section class="courses">
      <div class="courses">
        <!-- HTML Course -->
        <div class="course-card" data-course-id="html_course" data-course-name="HTML">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/image.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>HTML</h3>
            <div class="marquee">
              <p>Basics to Advanced</span></p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/technical1.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- CSS Course -->
        <div class="course-card" data-course-id="css_course" data-course-name="CSS">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/image copy 5.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>CSS</h3>
            <div class="marquee">
              <p>Basics to Advanced</span></p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/css/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- JavaScript Course -->
        <div class="course-card" data-course-id="javascript_course" data-course-name="JAVA SCRIPT">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/image copy 6.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>JAVA SCRIPT </h3>
            <div class="marquee">
              <p>Basics to Advanced</span></p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/jsQ/parches.html" class="btn track-visit"> More Details </a>
            </div>
          </div>
        </div>

        <!-- Node.js Course -->
        <div class="course-card" data-course-id="nodejs_course" data-course-name="NODE.JS">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/image copy 7.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>NODE.JS</h3>
            <div class="marquee">
             <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/node.js/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- Python Course -->
        <div class="course-card" data-course-id="python_course" data-course-name="PYTHON">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/python img.webp" alt="Course Image" id="image">
          <div class="course-content">
            <h3>PYTHON</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/python/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- PHP Course -->
        <div class="course-card" data-course-id="php_course" data-course-name="PHP">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/PHP.webp" alt="Course Image" id="image">
          <div class="course-content">
            <h3>PHP</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/PHP/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- MySQL Course -->
        <div class="course-card" data-course-id="mysql_course" data-course-name="MYSQL">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/mysql.webp" alt="Course Image" id="image">
          <div class="course-content">
            <h3>MYSQL</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/mysql/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- MongoDB Course -->
        <div class="course-card" data-course-id="mongodb_course" data-course-name="MONGODB">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/mogonDB.webp" alt="Course Image" id="image">
          <div class="course-content">
            <h3>MONGODB</h3>
            <div class="marquee">
               <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/mongodb/parches.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- Go Course -->
        <div class="course-card" data-course-id="go_course" data-course-name="GO">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/GO.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>GO</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/GO/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- Rust Course -->
        <div class="course-card" data-course-id="rust_course" data-course-name="RUST">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/rust.png"alt="Course Image" id="image">
          <div class="course-content">
            <h3>RUST</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/Rust/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- Swift Course -->
        <div class="course-card" data-course-id="swift_course" data-course-name="SWIFT">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/swift.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>SWIFT</h3>
            <div class="marquee">
               <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/Swift/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- TypeScript Course -->
        <div class="course-card" data-course-id="typescript_course" data-course-name="TYPE_SCRIPT">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/typescript.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>TYPE_SCRIPT</h3>
            <div class="marquee">
               <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/type_script/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- C Course -->
        <div class="course-card" data-course-id="c_course" data-course-name="C">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/C LOGO.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>C</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/C/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
        
        <!-- C++ Course -->
        <div class="course-card" data-course-id="cpp_course" data-course-name="C++">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/C++ LOGO.png"alt="Course Image" id="image">
          <div class="course-content">
            <h3>C++</h3>
            <div class="marquee">
              <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/C++/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>

        <!-- Java Course -->
        <div class="course-card" data-course-id="java_course" data-course-name="JAVA">
          <div class="visit-count">
            <span class="views-text">Viewers:</span>
            <span class="count">0</span>
          </div>
          <img src="/RTS/public/Deshbord/category/test/technical&coding/img/JAVA LOGO.png" alt="Course Image" id="image">
          <div class="course-content">
            <h3>JAVA</h3>
            <div class="marquee">
               <p>Beginner Basic</p>
            </div>
            <div class="btn-container">
              <a href="/RTS/public/Deshbord/category/test/technical&coding/Java/purchase-test.html" class="btn btn-light track-visit" id="drow">More Details</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!----------------------------------------------------------Footer parts in desbord---------------------------------------------------------------->
  <section class="footer">
    <footer>
      <div class="left">
        <img src="/RTS/public/Deshbord/logo.svg" alt="RID Bharat Logo">
        <p>
          Mig, 72, Rajiv Nagar, A Sector, Aayodhya Bypass Bhopal,
          Madhya Pradesh, India (462022)
        </p>
        <div>
          <a href="mailto:ridorg.in@gmail.com">
            <i class="fas fa-envelope"></i> ridorg.in@gmail.com | Email
          </a>
          <a href="tel:+91 9202707903">
            <i class="fas fa-phone"></i> +91 9202707903 | Mobile
          </a>
        </div>
      </div>

      <div class="links-head">
        <h3>Research Topics</h3>
        <hr>
        <div class="links">
          <div class="links-1">
            <a href="#">Computers</a>
            <a href="#">Tech National Affairs</a>
            <a href="#">AI: Artificial Intelligence</a>
            <a href="#">Race & Ethnicity</a>
            <a href="#">Religion</a>
            <a href="#">Age & Generations</a>
            <a href="#">Gender & Equality</a>
          </div>
          <div class="links-2">
            <a href="#">Space Engineering</a>
            <a href="#">Economy & Work</a>
            <a href="#">Science</a>
            <a href="#">Internet & Technology</a>
            <a href="#">News Habits & Media</a>
            <a href="#">Methodological Research</a>
          </div>
        </div>
      </div>

      <div class="links-social">
        <h3>Social Links</h3>
        <hr>
        <div class="links">
          <div class="links-1">
            <a href="#"><ion-icon name="logo-facebook"></ion-icon> Facebook</a>
            <a href="https://www.linkedin.com/in/rid-bharat-9a4517324">
              <ion-icon name="logo-linkedin"></ion-icon> LinkedIn
            </a>
            <a href="https://youtube.com/@ridbharat">
              <ion-icon name="logo-youtube"></ion-icon> YouTube
            </a>
          </div>
          <div class="links-2">
            <a href="https://www.instagram.com/ridbharat">
              <ion-icon name="logo-instagram"></ion-icon> Instagram
            </a>
            <a href="mailto:ridorg.in@gmail.com">
              <ion-icon name="mail-outline"></ion-icon> Email Us
            </a>
          </div>
        </div>
      </div>
    </footer>

    <p class="about-text">
      <strong>ABOUT RESEARCH INNOVATION & DISCOVERY:</strong> RID Organization i.e. Research,
      Innovation and Discovery Organization is an organization which is run by TWF (TWKSAA WELFARE FOUNDATION) NGO. The
      main objective of which is that in the coming times, the discovery, publication and use of NEW (RID, PMS & TLR)
      should be done first in Indian culture, civilization and language from this holy land of India.
    </p>

    <section class="copyrightsection">
      <p>Copyright ©2024, RID | TWF (TWKSAA Welfare Foundation). All Rights Reserved.</p>
      <div class="link">
        <a href="#">About</a>
        <a href="#">Terms & Conditions</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Feedback</a>
      </div>
    </section>
  </section>

  <!-- JavaScript Files -->
  <script>
        /* ==================== CONFIG ==================== */
const API_BASE_URL = "http://localhost:9191/api/course";

/* ==================== VISIT COUNT ==================== */

// Load all visit counts from DATABASE
async function loadAllVisitCounts() {
  try {
    const response = await fetch(`${API_BASE_URL}/visits`);
    if (!response.ok) throw new Error("Failed to fetch visit counts");

    const data = await response.json();

    data.forEach(course => {
      updateCount(course.courseId, course.visitCount);
    });

  } catch (error) {
    console.error("❌ Error loading visit counts:", error);
  }
}

// Update count on UI
function updateCount(courseId, newCount) {
  const card = document.querySelector(
    `.course-card[data-course-id="${courseId}"]`
  );
  if (!card) return;

  const countElement = card.querySelector(".visit-count .count");
  if (!countElement) return;

  const oldCount = parseInt(countElement.innerText) || 0;
  countElement.innerText = newCount;

  // Animation if count increased
  if (newCount > oldCount) {
    countElement.classList.add("updated");
    setTimeout(() => {
      countElement.classList.remove("updated");
    }, 1000);
  }
}

// Track visit on button click (DATABASE increment)
async function trackVisit(courseId, courseName) {
  try {
    const response = await fetch(`${API_BASE_URL}/visit`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ courseId, courseName })
    });

    if (!response.ok) throw new Error("Visit API failed");

    const data = await response.json();
    updateCount(courseId, data.visitCount);

  } catch (error) {
    console.error("❌ Error tracking visit:", error);
  }
}

/* ==================== BADGE INIT ==================== */

function initializeBadges() {
  document.querySelectorAll(".course-card").forEach(card => {
    const visitBox = card.querySelector(".visit-count");
    if (!visitBox) return;

    const oldBadge = visitBox.querySelector(
      ".update-badge, .new-badge, .hot-badge"
    );
    if (oldBadge) oldBadge.remove();

    const badge = document.createElement("span");
    badge.className = "update-badge";
    badge.innerText = "Updated";

    visitBox.prepend(badge);
  });
}

/* ==================== DOM READY ==================== */

document.addEventListener("DOMContentLoaded", () => {

  initializeBadges();
  loadAllVisitCounts();

  // Auto refresh visit count every 30 sec
  setInterval(loadAllVisitCounts, 30000);

  // Track visit on "Open Now"
  document.querySelectorAll(".track-visit").forEach(btn => {
    btn.addEventListener("click", function (e) {
      e.preventDefault();

      const card = this.closest(".course-card");
      const courseId = card.dataset.courseId;
      const courseName = card.dataset.courseName;
      const redirectUrl = this.getAttribute("href");

      trackVisit(courseId, courseName)
        .finally(() => {
          window.location.href = redirectUrl;
        });
    });
  });
})

    // Track visit to API
    async function trackVisit(courseId, courseName) {
      try {
        console.log('Tracking visit for technical course:', courseId, courseName);
        
        const response = await fetch(`${API_BASE_URL}/visit`, {
          method: "POST",
          headers: { 
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ 
            courseId: courseId, 
            courseName: courseName
          })
        });
        
        if (!response.ok) throw new Error('Failed to track visit');
        
        const data = await response.json();
        console.log('Technical course visit tracked:', data);
        
        // Immediately update the count
        if (data.visitCount !== undefined) {
          updateCount(courseId, data.visitCount);
        }
        
      } catch (error) {
        console.error('Error tracking technical course visit:', error);
        // Fallback: Increment locally
        incrementLocalCount(courseId);
      }
    }

    // ==================== LOCAL STORAGE HELPERS ====================
    function saveToLocalStorage(courseId, count) {
      const counts = JSON.parse(localStorage.getItem('technicalVisitCounts') || '{}');
      counts[courseId] = count;
      localStorage.setItem('technicalVisitCounts', JSON.stringify(counts));
    }

    function loadFromLocalStorage() {
      const counts = JSON.parse(localStorage.getItem('technicalVisitCounts') || '{}');
      Object.keys(counts).forEach(courseId => {
        updateCount(courseId, counts[courseId]);
      });
    }

    function incrementLocalCount(courseId) {
      const counts = JSON.parse(localStorage.getItem('technicalVisitCounts') || '{}');
      const currentCount = counts[courseId] || 0;
      counts[courseId] = currentCount + 1;
      localStorage.setItem('technicalVisitCounts', JSON.stringify(counts));
      updateCount(courseId, counts[courseId]);
    }

    // ==================== OTHER EVENT LISTENERS ====================
    function setupEventListeners() {
      // Sidebar toggle functionality
      const sidebarToggle = document.querySelector('.sidebar-toggle');
      const sidebar = document.querySelector('.sidebar');

      if (sidebarToggle && sidebar) {
        sidebarToggle.addEventListener('click', function() {
          sidebar.classList.toggle('open');
        });
      }

      // Navbar toggle functionality
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.getElementById('navMenu');
      const mobileNav = document.getElementById('mobileNav');

      if (menuToggle && navMenu) {
        menuToggle.addEventListener('click', function() {
          navMenu.classList.toggle('active');
          mobileNav.classList.toggle('active');
        });
      }

      // Close mobile nav when a link is clicked
      const mobileNavLinks = document.querySelectorAll('.mobile-nav a');
      mobileNavLinks.forEach(link => {
        link.addEventListener('click', function() {
          navMenu.classList.remove('active');
          mobileNav.classList.remove('active');
        });
      });

      // Close sidebar when a link is clicked (on mobile)
      const sidebarLinks = document.querySelectorAll('.sidebar a');
      sidebarLinks.forEach(link => {
        link.addEventListener('click', function() {
          if (window.innerWidth <= 992) {
            sidebar.classList.remove('open');
          }
        });
      });

      // Setup search functionality
      setupSearch();
    }

    // ==================== SEARCH FUNCTIONALITY ====================
    function setupSearch() {
      const searchInput = document.getElementById("searchInput");
      const mobileSearchInput = document.getElementById("mainMobileSearchInput");
      const courseCards = document.querySelectorAll(".course-card");

      function filterCourses(value) {
        value = value.toLowerCase().trim();

        courseCards.forEach(card => {
          const title = card.querySelector("h3").innerText.toLowerCase();
          const courseName = card.getAttribute('data-course-name').toLowerCase();

          if (title.includes(value) || courseName.includes(value)) {
            card.style.display = "block";
          } else {
            card.style.display = "none";
          }
        });
      }

      // Desktop Search
      if (searchInput) {
        searchInput.addEventListener("keyup", function () {
          filterCourses(this.value);
        });
      }

      // Mobile Search
      if (mobileSearchInput) {
        mobileSearchInput.addEventListener("keyup", function () {
          filterCourses(this.value);
        });
      }
    }
  </script>




</body>
</html>